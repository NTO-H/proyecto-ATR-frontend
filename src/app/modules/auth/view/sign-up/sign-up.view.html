<div class="container-form">
  <div class="back-button">
    <a routerLink="/public/home" class="go-back">
      <i class="fas fa-arrow-left"></i> Ir atrÃ¡s
    </a>
  </div>

  <div class="logo-container">
    <img
      src="https://res.cloudinary.com/dvvhnrvav/image/upload/v1726496561/images-AR/n7cjxwmizj0ath7oegjq.png"
      alt="Atelier logo"
      class="logo"
    />
  </div>

  <form [formGroup]="formulario" (ngSubmit)="registroCliente()" class="form">
    <!-- Nombre de usuario -->
    <label for="username">Nombre de usuario</label>
    <input
      type="text"
      pInputText
      formControlName="username"
      name="username"
      placeholder="Introduce tu nombre de usuario"
      required
      [maxlength]="10"
    />
    <span style="color: red" *ngIf="errorMessages.username" class="text-danger">
      {{ errorMessages.username }}
    </span>
    <span
      style="color: red"
      *ngIf="formulario.get('username')?.invalid && formulario.get('username')?.touched"
      class="text-danger"
    >
      El campo de nombre de usuario es requerido.
    </span>

    <!-- Correo ElectrÃ³nico -->
    <label for="email">Correo ElectrÃ³nico</label>
    <input
      type="email"
      pInputText
      formControlName="email"
      name="email"
      placeholder="Introduce tu correo electrÃ³nico"
      required
    />
    <span style="color: red" *ngIf="errorMessages.email" class="text-danger">
      {{ errorMessages.email }}
    </span>
    <span
      style="color: red"
      *ngIf="formulario.get('email')?.invalid && formulario.get('email')?.touched"
      class="text-danger"
    >
      El correo electrÃ³nico debe ser vÃ¡lido.
    </span>

    <!-- NÃºmero telefÃ³nico -->
    <label for="tel">NÃºmero telefÃ³nico</label>
    <p-inputMask
      id="tel"
      mask="+52 999 999 9999"
      formControlName="tel"
      placeholder="Introduce tu nÃºmero telefÃ³nico"
    ></p-inputMask>
    <span style="color: red" *ngIf="errorMessages.tel" class="text-danger">
      {{ errorMessages.tel }}
    </span>
    <span
      style="color: red"
      *ngIf="formulario.get('tel')?.invalid && formulario.get('tel')?.touched"
      class="text-danger"
    >
      El nÃºmero telefÃ³nico es requerido y debe ser vÃ¡lido.
    </span>
    <!-- [ngClass]="{'is-invalid': !formulario.get('tel')?.valid && formulario.get('tel')?.touched, 'is-valid': formulario.get('tel')?.valid}" -->
    <!-- [styleClass]="isInvalid('tel') ? 'ng-invalid' : 'ng-valid'" -->
    <div class="password-container">
      <label for="password">ContraseÃ±a</label>
      <input
        [type]="mostrarPassword ? 'text' : 'password'"
        id="password"
        formControlName="password"
        placeholder="Introduce tu contraseÃ±a"
        (input)="verificarPassword()"
        style="width: 100%; margin-bottom: 20px"
        required
        [ngClass]="{'is-valid': coincidenPasswords, 'is-invalid': !coincidenPasswords && formulario.get('confirmPassword')?.touched}"
      />
      <button
        type="button"
        (click)="togglePasswordVisibility()"
        class="toggle-password"
      >
        <i 
          class="fas"
          [ngClass]="mostrarPassword ? 'fa-eye-slash' : 'fa-eye'"
        ></i>
        <!-- Icono para el botÃ³n -->
      </button>
    </div>
    <div *ngIf="passwordStrength != 'Muy fuerte'" class="password-strength">
      <div [ngClass]="strengthColor">{{ passwordStrength }}</div>
    </div>

    <!-- Requisitos de contraseÃ±a -->
    <span
      *ngIf="passwordStrength != 'Muy fuerte'"
      class="password-requirements"
    >
      <p>Requisitos</p>
      <ul style="line-height: 1.5; list-style-type: none">
        <li [ngClass]="{'text-success': validacionesPassword.tieneMinuscula}">
          <span *ngIf="validacionesPassword.tieneMinuscula">âœ…</span>
          <span *ngIf="!validacionesPassword.tieneMinuscula">ğŸ”˜</span>
          Al menos una letra minÃºscula
        </li>
        <li [ngClass]="{'text-success': validacionesPassword.tieneMayuscula}">
          <span *ngIf="validacionesPassword.tieneMayuscula">âœ…</span>
          <span *ngIf="!validacionesPassword.tieneMayuscula">ğŸ”˜</span>
          Al menos una letra mayÃºscula
        </li>
        <li [ngClass]="{'text-success': validacionesPassword.tieneNumero}">
          <span *ngIf="validacionesPassword.tieneNumero">âœ…</span>
          <span *ngIf="!validacionesPassword.tieneNumero">ğŸ”˜</span>
          Al menos un nÃºmero
        </li>
        <li [ngClass]="{'text-success': validacionesPassword.longitudMinima}">
          <span *ngIf="validacionesPassword.longitudMinima">âœ…</span>
          <span *ngIf="!validacionesPassword.longitudMinima">ğŸ”˜</span>
          MÃ­nimo 8 caracteres
        </li>
      </ul>
    </span>
    <!-- Campo de confirmaciÃ³n de contraseÃ±a -->
    <div *ngIf="passwordStrength === 'Muy fuerte'">
      <label for="confirmPassword">Confirma tu contraseÃ±a</label>
      <input
        [type]="mostrarPassword ? 'text' : 'password'"
        formControlName="confirmPassword"
        id="confirmPassword"
        placeholder="Confirma tu contraseÃ±a"
        [ngClass]="{'is-valid': coincidenPasswords, 'is-invalid': !coincidenPasswords && formulario.get('confirmPassword')?.touched}"
      />
      <!-- Mensaje de error si las contraseÃ±as no coinciden -->
      <div
        *ngIf="!coincidenPasswords && formulario.get('confirmPassword')?.touched"
        class="text-danger"
      >
        Las contraseÃ±as no coinciden.
      </div>
    </div>
    <div class="purchase-terms-container">
      <p>Tus datos personales se utilizarÃ¡n para procesar tu compra, mejorar tu experiencia en esta web y otros propÃ³sitos descritos en nuestra <a href="#" target="_blank">polÃ­tica de privacidad</a>.</p>
    
      <div class="checkbox-terms">
        <input type="checkbox" id="accept-terms" name="accept-terms">
        <label for="accept-terms">
          Al marcar esta casilla acepto la <a href="#" target="_blank">polÃ­tica de privacidad</a>, los <a href="#" target="_blank">tÃ©rminos y condiciones de la compra</a> y confirmo que soy mayor de 18 aÃ±os de edad.
        </label>
      </div>
    </div>
    
    <!-- BotÃ³n de registro -->
    <button type="submit" [disabled]="formulario.invalid">Registrar</button>
  </form>
</div>